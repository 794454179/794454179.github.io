<!DOCTYPE html>

<html lang="zh-CN">

<head>
  
  <title>CentOS7-Docker - My-Blog</title>
  <meta charset="UTF-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  
  

  <link rel="shortcut icon" href="/favicon.ico" type="image/png" />
  <meta name="description" content="CentOS7安装Docker-ce、Docker架构、配置Docker镜像加速器、Docker常用命令">
<meta property="og:type" content="article">
<meta property="og:title" content="CentOS7-Docker">
<meta property="og:url" content="http://yoursite.com/2020/04/27/CentOS7-Docker/index.html">
<meta property="og:site_name" content="My-Blog">
<meta property="og:description" content="CentOS7安装Docker-ce、Docker架构、配置Docker镜像加速器、Docker常用命令">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587982153931.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587990050217.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587990420239.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587990219084.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587990501726.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587990610943.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587991671528.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587991180613.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587991572721.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587991774906.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587991748469.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587991839968.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587991926325.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587991974970.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587992441414.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587992554225.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587992653408.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587992937667.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587993216946.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587993491483.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587993601980.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587993905254.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587994081048.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587994081049.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587996664520.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588051174084.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588051351568.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588051806166.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588051876596.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588052483104.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/F:%5Cblog%5Csource_posts%5CCentOS7-Docker%5C1588052253183.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588053450495.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588053762834.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588053914069.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588054044036.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588054287347.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588054331391.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588055696120.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588054502719.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588054534658.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588054571476.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588054682269.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/C:%5CUsers%5C79445%5CAppData%5CLocal%5CTemp%5C1588057208207.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588055754220.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588055925029.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588056080228.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588056187250.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588056237196.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588056358707.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588060273602.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588060370832.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588136863012.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588137394331.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588137492353.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588137847813.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588137950549.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588138219123.png">
<meta property="og:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1588139440523.png">
<meta property="article:published_time" content="2020-04-27T09:36:21.000Z">
<meta property="article:modified_time" content="2020-05-11T07:05:19.222Z">
<meta property="article:author" content="Mr.wang">
<meta property="article:tag" content="CentOS7">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/04/27/CentOS7-Docker/1587982153931.png">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/gh/nexmoe/nexmoe.github.io@latest/css/style.css,npm/highlight.js@9.15.8/styles/atom-one-dark.css,gh/nexmoe/nexmoe.github.io@latest/lib/mdui_043tiny/css/mdui.css,gh/nexmoe/nexmoe.github.io@latest/lib/iconfont/iconfont.css" crossorigin>
  
  <!--<link rel="stylesheet" href="/css/style.css?v=1590388344454">-->

   
    <style>
      .nexmoe-avatar img:hover {
        -webkit-transform: rotateZ(360deg);
        -moz-transform: rotateZ(360deg);
        transform: rotateZ(360deg);
      }	
    </style>
  
<meta name="generator" content="Hexo 4.2.0"></head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(http://39.107.253.141/13.jpg);opacity: 1;filter: none;"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="Mr.wang" class="mdui-btn mdui-btn-icon"><img src="http://39.107.253.141/eeb88387bfc51b95-93f3add4d906f851-42f9e31d4b34267dd2fd4b0d39d0e49e.jpg" alt="Mr.wang"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple" style="width:calc(100% - 80px)">
        <a href="/" title="Mr.wang">
            <img src="http://39.107.253.141/eeb88387bfc51b95-93f3add4d906f851-42f9e31d4b34267dd2fd4b0d39d0e49e.jpg" alt="Mr.wang" alt="Mr.wang">
        </a>
    </div>
    <div class="nexmoe-count" style="border-radius:15px;background:white;padding:15px 10px;margin:20px 20px 20px 20px;box-shadow:0 0 1rem rgba(161,177,204,.4);">
        <div><span>文章</span>10</div>
        <div><span>标签</span>10</div>
        <div><span>分类</span>6</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}" style="background-color:white;border-radius:15px;margin:20px 20px 20px 20px;box-shadow:0 0 1rem rgba(161,177,204,.4);">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/archives" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/friends" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about" title="关于我">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于我
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap" style="margin:20px 20px 20px 20px;">
    <div class="nexmoe-widget nexmoe-search">
        <form id="search_form" action_e="https://cn.bing.com/search?q=site:nexmoe.com" onsubmit="return search();">
            <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
        </form>
    </div>
</div>
  
  <div class="nexmoe-widget-wrap" style="margin:20px 20px 20px 20px;">
    <h3 class="nexmoe-widget-title">社交按钮</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://www.bilibili.com/?spm_id_from=333.999.b_696e7465726e6174696f6e616c486561646572.1" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
  
  
  <div class="nexmoe-widget-wrap" style="margin:20px 20px 20px 20px;">
    <h3 class="nexmoe-widget-title">文章分类</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/CentOS7/">CentOS7</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/JavaSE/">JavaSE</a>
          <span class="category-list-count">4</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/MySQL/">MySQL</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/Redis/">Redis</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/正则表达式/">正则表达式</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/算法/">算法</a>
          <span class="category-list-count">1</span>
        </li>

        
      </ul>

    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap" style="margin:20px 20px 20px 20px;">
    <h3 class="nexmoe-widget-title">标签云</h3>
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/CentOS7/" style="font-size: 10px;">CentOS7</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/I-O/" style="font-size: 10px;">I/O</a> <a href="/tags/JavaSE/" style="font-size: 20px;">JavaSE</a> <a href="/tags/Java%E9%9B%86%E5%90%88/" style="font-size: 10px;">Java集合</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95/" style="font-size: 10px;">动态规划算法</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 10px;">多线程</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10px;">正则表达式</a>
    </div>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap" style="margin:20px 20px 20px 20px;">
    <h3 class="nexmoe-widget-title">文章归档</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li></ul>
    </div>
  </div>


  
</aside>
    <div class="nexmoe-copyright">
        &copy; 2020 Mr.wang
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary" style="box-shadow: none;padding:25px;margin:15px;border-radius:15px;">
        <div class="nexmoe-post" style="background: white;padding:25px; border-radius: 15px;">
  
      <div class="nexmoe-post-cover" style="padding-bottom: 37.5%;"> 
          <img data-src="http://39.107.253.141/3.jpg" data-sizes="auto" alt="CentOS7-Docker" class="lazyload">
          <h1>CentOS7-Docker</h1>
      </div>
  
  
  <div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2020年04月27日</a>
    <a><i class="nexmoefont icon-areachart"></i>1.9k 字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>大概 9 分钟</a>
</div>

  <div class="nexmoe-post-right">
    
  </div>

  <article>
    <p>CentOS7安装Docker-ce、Docker架构、配置Docker镜像加速器、Docker常用命令 <a id="more"></a></p>
<h2 id="一、CentOS7安装Docker-ce"><a href="#一、CentOS7安装Docker-ce" class="headerlink" title="一、CentOS7安装Docker-ce"></a>一、CentOS7安装Docker-ce</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> step 1: 安装必要的一些系统工具</span></span><br><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"><span class="meta">#</span><span class="bash"> Step 2: 添加软件源信息</span></span><br><span class="line">sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"><span class="meta">#</span><span class="bash"> Step 3: 更新并安装Docker-CE</span></span><br><span class="line">sudo yum makecache fast</span><br><span class="line">sudo yum -y install docker-ce</span><br><span class="line"><span class="meta">#</span><span class="bash"> Step 4: 开启Docker服务</span></span><br><span class="line">sudo service docker start</span><br></pre></td></tr></table></figure>

<h2 id="二、Docker架构"><a href="#二、Docker架构" class="headerlink" title="二、Docker架构"></a>二、Docker架构</h2><p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587982153931.png" alt="58798215393" class="lazyload"></p>
<h2 id="三、配置Docker镜像加速器"><a href="#三、配置Docker镜像加速器" class="headerlink" title="三、配置Docker镜像加速器"></a>三、配置Docker镜像加速器</h2><p><a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors" target="_blank" rel="noopener">https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors</a></p>
<h2 id="四、Docker命令"><a href="#四、Docker命令" class="headerlink" title="四、Docker命令"></a>四、Docker命令</h2><h3 id="1、Docker进程相关命令"><a href="#1、Docker进程相关命令" class="headerlink" title="1、Docker进程相关命令"></a>1、Docker进程相关命令</h3><h4 id="（1）启动docker服务"><a href="#（1）启动docker服务" class="headerlink" title="（1）启动docker服务"></a>（1）启动docker服务</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>

<h4 id="（2）停止docker服务"><a href="#（2）停止docker服务" class="headerlink" title="（2）停止docker服务"></a>（2）停止docker服务</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop docker</span><br></pre></td></tr></table></figure>

<h4 id="（3）重启docker服务"><a href="#（3）重启docker服务" class="headerlink" title="（3）重启docker服务"></a>（3）重启docker服务</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<h4 id="（4）查看docker服务状态"><a href="#（4）查看docker服务状态" class="headerlink" title="（4）查看docker服务状态"></a>（4）查看docker服务状态</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status docker</span><br></pre></td></tr></table></figure>

<h4 id="（5）开机启动docker服务"><a href="#（5）开机启动docker服务" class="headerlink" title="（5）开机启动docker服务"></a>（5）开机启动docker服务</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure>

<h3 id="2、Docker镜像相关命令"><a href="#2、Docker镜像相关命令" class="headerlink" title="2、Docker镜像相关命令"></a>2、Docker镜像相关命令</h3><h4 id="（1）查看镜像（和本地相关）（查看本地存在的镜像文件）"><a href="#（1）查看镜像（和本地相关）（查看本地存在的镜像文件）" class="headerlink" title="（1）查看镜像（和本地相关）（查看本地存在的镜像文件）"></a>（1）查看镜像（和本地相关）（查看本地存在的镜像文件）</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587990050217.png" alt="58799005021" class="lazyload"></p>
<p>(TAG：latest则为最新版)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images -q      #查看所有镜像的id</span><br></pre></td></tr></table></figure>

<h4 id="（2）搜索镜像（和远程相关）"><a href="#（2）搜索镜像（和远程相关）" class="headerlink" title="（2）搜索镜像（和远程相关）"></a>（2）搜索镜像（和远程相关）</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search mysql</span><br></pre></td></tr></table></figure>

<h4 id="（3）拉取镜像（和远程相关）（下载）"><a href="#（3）拉取镜像（和远程相关）（下载）" class="headerlink" title="（3）拉取镜像（和远程相关）（下载）"></a>（3）拉取镜像（和远程相关）（下载）</h4><p>（a）登录hub.docker.com查看存在的版本号</p>
<p>（b）指定版本号：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull redis:5.0</span><br></pre></td></tr></table></figure>

<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587990420239.png" alt="58799042023" class="lazyload"></p>
<p>（c）不指定版本号：（默认最新）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull [redis/mysql/...]</span><br></pre></td></tr></table></figure>

<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587990219084.png" alt="58799021908" class="lazyload"></p>
<h4 id="（4）删除镜像（和本地相关）"><a href="#（4）删除镜像（和本地相关）" class="headerlink" title="（4）删除镜像（和本地相关）"></a>（4）删除镜像（和本地相关）</h4><p>（a）通过Image id删除</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi [Image id]</span><br></pre></td></tr></table></figure>

<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587990501726.png" alt="58799050172" class="lazyload"></p>
<p>（b）通过版本号删除</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi redis:latest</span><br></pre></td></tr></table></figure>

<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587990610943.png" alt="58799061094" class="lazyload"></p>
<h3 id="3、Docker容器相关命令"><a href="#3、Docker容器相关命令" class="headerlink" title="3、Docker容器相关命令"></a>3、Docker容器相关命令</h3><h4 id="（1）查看容器"><a href="#（1）查看容器" class="headerlink" title="（1）查看容器"></a>（1）查看容器</h4><p>（a）查看正在运行的容器：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure>

<p>（b）查看所有容器：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure>

<h4 id="（2）创建容器"><a href="#（2）创建容器" class="headerlink" title="（2）创建容器"></a>（2）创建容器</h4><p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587991671528.png" alt="58799167152" class="lazyload"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name=c1 centos:7 /bin/bash</span><br></pre></td></tr></table></figure>

<p>（a）-i ：容器一直运行   </p>
<p>-t：给容器分配终端（创建后会自动进入容器，且使用完退出（exit）时会自动关闭）</p>
<p>-d：后台运行创建的容器（创建后不会自动进入容器，且使用完退出（exit）时不会自动关闭）</p>
<p>（b）–name：起名字</p>
<p>（c）后面跟指定的镜像和其版本</p>
<p>（d）/bin/bash：进入容器的初始化指令。相当于打开shell脚本（默认为/bin/bash）</p>
<p>（e）回车命令后 前面会变化为容器id</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587991180613.png" alt="58799118061" class="lazyload"></p>
<p>（f）退出容器：（-it创建的容器通过exit退出后  容器会自动关闭）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure>

<h4 id="（3）进入容器"><a href="#（3）进入容器" class="headerlink" title="（3）进入容器"></a>（3）进入容器</h4><p>（a）-it形式进入（创建后会自动进入容器，且使用完退出（exit）时会自动关闭）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it [name] /bin/bash</span><br></pre></td></tr></table></figure>

<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587991572721.png" alt="58799157272" class="lazyload"></p>
<p>（b）-id形式进入（创建后不会自动进入容器，且使用完退出（exit）时不会自动关闭）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -id [name] /bin/bash</span><br></pre></td></tr></table></figure>

<h4 id="（4）启动容器"><a href="#（4）启动容器" class="headerlink" title="（4）启动容器"></a>（4）启动容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start name</span><br></pre></td></tr></table></figure>

<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587991774906.png" alt="58799177490" class="lazyload"></p>
<h4 id="（5）停止容器"><a href="#（5）停止容器" class="headerlink" title="（5）停止容器"></a>（5）停止容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop name</span><br></pre></td></tr></table></figure>

<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587991748469.png" alt="58799174846" class="lazyload"></p>
<h4 id="（6）删除容器"><a href="#（6）删除容器" class="headerlink" title="（6）删除容器"></a>（6）删除容器</h4><p>（a）删除特定容器（不能删除正在运行的容器）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm [容器id/name]</span><br></pre></td></tr></table></figure>

<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587991839968.png" alt="58799183996" class="lazyload"></p>
<p>（b）删除所有容器（不能删除正在运行的容器）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker ps -aq	#查看所有容器</span><br><span class="line">docker rm ·docker ps -aq·     #删除</span><br></pre></td></tr></table></figure>

<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587991926325.png" alt="58799192632" class="lazyload"></p>
<h4 id="（7）查看容器信息"><a href="#（7）查看容器信息" class="headerlink" title="（7）查看容器信息"></a>（7）查看容器信息</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect name</span><br></pre></td></tr></table></figure>

<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587991974970.png" alt="58799197497" class="lazyload"></p>
<h3 id="4、Docker容器的数据卷"><a href="#4、Docker容器的数据卷" class="headerlink" title="4、Docker容器的数据卷"></a>4、Docker容器的数据卷</h3><h4 id="（1）总体介绍"><a href="#（1）总体介绍" class="headerlink" title="（1）总体介绍"></a>（1）总体介绍</h4><p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587992441414.png" alt="58799244141" class="lazyload"></p>
<h4 id="（2）配置数据卷"><a href="#（2）配置数据卷" class="headerlink" title="（2）配置数据卷"></a>（2）配置数据卷</h4><p>（a）一个容器挂载单个数据卷</p>
<p>（宿主机：所使用的服务器[cenos7]）</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587992554225.png" alt="58799255422" class="lazyload"></p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587992653408.png" alt="58799265340" class="lazyload"></p>
<p>（注：在宿主机和容器内修改都会双方同时同步）</p>
<p>（b）一个容器挂载多个数据卷 （~表示/root）（\表示这行代码没敲完，换行继续敲）<img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587992937667.png" alt="58799293766" class="lazyload"></p>
<p>（c）两个容器可以挂载同一个数据卷，间接实现两个容器间交互</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587993216946.png" alt="58799321694" class="lazyload"></p>
<h4 id="（3）数据卷容器"><a href="#（3）数据卷容器" class="headerlink" title="（3）数据卷容器"></a>（3）数据卷容器</h4><p>（a）概念</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587993491483.png" alt="58799349148" class="lazyload"></p>
<p>（b）流程</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587993601980.png" alt="58799360198" class="lazyload"></p>
<h4 id="（4）小结"><a href="#（4）小结" class="headerlink" title="（4）小结"></a>（4）小结</h4><p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587993905254.png" alt="58799390525" class="lazyload"></p>
<h3 id="5、MySQL-tomcat-nginx-redis-部署见附录"><a href="#5、MySQL-tomcat-nginx-redis-部署见附录" class="headerlink" title="5、MySQL/tomcat/nginx/redis 部署见附录"></a>5、MySQL/tomcat/nginx/redis 部署见附录</h3><h4 id="（1）部署步骤"><a href="#（1）部署步骤" class="headerlink" title="（1）部署步骤"></a>（1）部署步骤</h4><p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587994081048.png" alt="58799408104" class="lazyload"></p>
<h4 id="（2）部署方式"><a href="#（2）部署方式" class="headerlink" title="（2）部署方式"></a>（2）部署方式</h4><p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587994081049.png" alt="58799435218" class="lazyload"></p>
<h4 id="（3）具体操作"><a href="#（3）具体操作" class="headerlink" title="（3）具体操作"></a>（3）具体操作</h4><p>详情见附录（本附录来源B站视频（视频链接见参考资料））</p>
<p>链接: <a href="https://pan.baidu.com/s/1eP3Mn4G2N_cxaTlL5xZeLg" target="_blank" rel="noopener">https://pan.baidu.com/s/1eP3Mn4G2N_cxaTlL5xZeLg</a> 提取码: 899m</p>
<p>注意：外部Navicat连接服务器里的mysql时  需要到  阿里云服务器的控制台  =&gt;  安全组规则  =&gt;  访问规则   =&gt;   添加端口 </p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1587996664520.png" alt="58799666452" class="lazyload"></p>
<h3 id="6、Dockerfile-Docker镜像原理"><a href="#6、Dockerfile-Docker镜像原理" class="headerlink" title="6、Dockerfile-Docker镜像原理"></a>6、Dockerfile-Docker镜像原理</h3><h4 id="（1）思考："><a href="#（1）思考：" class="headerlink" title="（1）思考："></a>（1）思考：</h4><p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588051174084.png" alt="58805117408" class="lazyload"></p>
<h4 id="（2）Liunx的文件操作系统："><a href="#（2）Liunx的文件操作系统：" class="headerlink" title="（2）Liunx的文件操作系统："></a>（2）Liunx的文件操作系统：</h4><p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588051351568.png" alt="58805137236" class="lazyload"></p>
<h4 id="（3）Docker镜像原理"><a href="#（3）Docker镜像原理" class="headerlink" title="（3）Docker镜像原理"></a>（3）Docker镜像原理</h4><p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588051806166.png" alt="58805180616" class="lazyload"></p>
<h4 id="（4）思考答案："><a href="#（4）思考答案：" class="headerlink" title="（4）思考答案："></a>（4）思考答案：</h4><p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588051876596.png" alt="58805187659" class="lazyload"></p>
<h3 id="7、Dockerfile-Docker镜像制作"><a href="#7、Dockerfile-Docker镜像制作" class="headerlink" title="7、Dockerfile-Docker镜像制作"></a>7、Dockerfile-Docker镜像制作</h3><h4 id="（1）Docker镜像制作-容器转为镜像（不常用）"><a href="#（1）Docker镜像制作-容器转为镜像（不常用）" class="headerlink" title="（1）Docker镜像制作-容器转为镜像（不常用）"></a>（1）Docker镜像制作-容器转为镜像（不常用）</h4><p>（a）Docker镜像制作-容器转为镜像（不常用）</p>
<p>（注：数据卷挂载的数据不会复制）</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588052483104.png" alt="58805248310" class="lazyload"></p>
<p>（b）实战</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/F:%5Cblog%5Csource_posts%5CCentOS7-Docker%5C1588052253183.png" alt="58805225318" class="lazyload"></p>
<h4 id="（2）dockerfile"><a href="#（2）dockerfile" class="headerlink" title="（2）dockerfile"></a>（2）dockerfile</h4><p>（a）概念</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588053450495.png" alt="58805345049" class="lazyload"></p>
<p>（b）关键字见附录</p>
<p>（c）实战案例1：自定义centos7镜像</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588053762834.png" alt="58805376283" class="lazyload"></p>
<p>​    1）编写dockerfile：</p>
<p><img src="/2020/04/27/CentOS7-Docker/1588053914069.png" alt></p>
<p>​    2）执行：</p>
<p><img src="/2020/04/27/CentOS7-Docker/1588054044036.png" alt></p>
<p>​    3）成功：<img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588054287347.png" alt="58805428734" class="lazyload"></p>
<p>​    4）根据上面创建的镜像 创建容器：</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588054331391.png" alt="58805433139" class="lazyload"></p>
<p>（d）实例案例2：定义dockerfile，发布springboot项目</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588055696120.png" alt="58805569612" class="lazyload"></p>
<h5 id="具体步骤："><a href="#具体步骤：" class="headerlink" title="具体步骤："></a>具体步骤：</h5><p>​    1）打包springboot项目为jar包：</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588054502719.png" alt="58805450271" class="lazyload"></p>
<p>​    2）打包完成：</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588054534658.png" alt="58805453465" class="lazyload"></p>
<p>​    3）测试本地是否可以运行：</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588054571476.png" alt="58805457147" class="lazyload"></p>
<p>​     4）通过xftp将 jar包 传到宿主机：（alt+p切换到sftp，用put命令将window的文件传到宿主机）</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588054682269.png" alt="58805468226" class="lazyload"></p>
<p>​    5）移动到dockerfile文件夹下：</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/C:%5CUsers%5C79445%5CAppData%5CLocal%5CTemp%5C1588057208207.png" alt="58805720820" class="lazyload"></p>
<p>​    6）创建该dockerfile文件：</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588055754220.png" alt="58805575422" class="lazyload"></p>
<p>​    7）编写该dockerfile文件：</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588055925029.png" alt="58805592502" class="lazyload"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FROM java:8  			#定义父镜像</span><br><span class="line">MAINTAINER whm &lt;794454179@qq.com&gt;     ##作者名字</span><br><span class="line">VOLUME /tmp			#数据卷目录</span><br><span class="line">ADD my-blog-4.0.0-SNAPSHOT.jar mygameqian.jar     #源文件和  新文件名字</span><br><span class="line">EXPOSE 8084	#暴露端口</span><br><span class="line"><span class="meta">#</span><span class="bash">CMD java -jar my-game-background.jar		<span class="comment">#执行命令 类似ENTRYPOINT</span></span></span><br><span class="line">ENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/mygameqian.jar"]</span><br></pre></td></tr></table></figure>

<p>​    8）运行</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588056080228.png" alt="58805608022" class="lazyload"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -f ./my-game-hou-dockerfile -t mygamehou .</span><br><span class="line">docker build -f ./my-game-qian-dockerfile -t mygameqian .</span><br></pre></td></tr></table></figure>

<p>​    9）查看镜像</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588056187250.png" alt="58805618725" class="lazyload"></p>
<p>​    10）启动容器</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588056237196.png" alt="58805623719" class="lazyload"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -id -p 8085:8085 mygamehou		#-p 8085:8085 为端口映射</span><br><span class="line">docker run -id -p 8084:8084 mygameqian</span><br></pre></td></tr></table></figure>

<p>  11）windows浏览器访问</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588056358707.png" alt="58805635870" class="lazyload"></p>
<p>  12）查看日志</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs [容器id/name]</span><br></pre></td></tr></table></figure>

<h3 id="8、Docker服务编排"><a href="#8、Docker服务编排" class="headerlink" title="8、Docker服务编排"></a>8、Docker服务编排</h3><p>####（1）服务编排概念</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588060273602.png" alt="58806027360" class="lazyload"></p>
<h4 id="（2）Docker-Compose概述"><a href="#（2）Docker-Compose概述" class="headerlink" title="（2）Docker Compose概述"></a>（2）Docker Compose概述</h4><p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588060370832.png" alt="58806037083" class="lazyload"></p>
<h3 id="9、Docker私有仓库"><a href="#9、Docker私有仓库" class="headerlink" title="9、Docker私有仓库"></a>9、Docker私有仓库</h3><h3 id="10、idea集成docker实现镜像打包一键部署"><a href="#10、idea集成docker实现镜像打包一键部署" class="headerlink" title="10、idea集成docker实现镜像打包一键部署"></a>10、idea集成docker实现镜像打包一键部署</h3><h4 id="（1）Docker开启远程访问"><a href="#（1）Docker开启远程访问" class="headerlink" title="（1）Docker开启远程访问"></a>（1）Docker开启远程访问</h4><p>（a）开启docker远程服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">vim /usr/lib/systemd/system/docker.service</span><br><span class="line">ExecStart=/usr/bin/dockerd  -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock</span><br></pre></td></tr></table></figure>

<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588136863012.png" alt="58813686301" class="lazyload"></p>
<p>（b）重新加载配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure>

<p>（c）重启服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker.service</span><br></pre></td></tr></table></figure>

<p>（d）查看端口是否开启（阿里云服务器则需要去暴露端口即可）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -nlpt</span><br></pre></td></tr></table></figure>

<h4 id="（2）idea安装docker插件"><a href="#（2）idea安装docker插件" class="headerlink" title="（2）idea安装docker插件"></a>（2）idea安装docker插件</h4><p>2018，2019已自动安装</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588137394331.png" alt="58813739433" class="lazyload"></p>
<h4 id="（3）idea配置docker，并实现maven自动创建镜像"><a href="#（3）idea配置docker，并实现maven自动创建镜像" class="headerlink" title="（3）idea配置docker，并实现maven自动创建镜像"></a>（3）idea配置docker，并实现maven自动创建镜像</h4><p>（a）连接docker</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588137492353.png" alt="58813749235" class="lazyload"></p>
<p>（b）镜像配置</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588137847813.png" alt="58813784781" class="lazyload"></p>
<p>（c）连接</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588137950549.png" alt="58813795054" class="lazyload"></p>
<p>（d）根据镜像创建容器</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588138219123.png" alt="58813821912" class="lazyload"></p>
<p>（e）配置pom文件</p>
<p><img data-sizes="auto" data-src="/2020/04/27/CentOS7-Docker/1588139440523.png" alt="58813944052" class="lazyload"></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">            &lt;!-- Docker maven plugin --&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;com.spotify&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;1.0.0&lt;/version&gt;</span><br><span class="line"></span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;!-- 镜像名称 mygame/My-Game  前者为上方<span class="number">25</span>行定义  后者为项目名称  自动获取 --&gt;</span><br><span class="line">                    &lt;imageName&gt;$&#123;docker.image.prefix&#125;/$&#123;project.artifactId&#125;&lt;/imageName&gt;</span><br><span class="line">                    &lt;!-- 指定标签--&gt;</span><br><span class="line">                    &lt;imageTags&gt;</span><br><span class="line">                        &lt;imageTag&gt;latest&lt;/imageTag&gt;</span><br><span class="line">                    &lt;/imageTags&gt;</span><br><span class="line">                    &lt;!-- 基础镜像jdk <span class="number">1.8</span>--&gt;</span><br><span class="line">                    &lt;baseImage&gt;java&lt;/baseImage&gt;</span><br><span class="line">                    &lt;!-- 制作者提供本人信息 --&gt;</span><br><span class="line">                    &lt;maintainer&gt;whm 794454179@qq.com&lt;/maintainer&gt;</span><br><span class="line">                    &lt;!-- 切换到/ROOT目录 相当于dockerfile中ENTRYPOINT--&gt;</span><br><span class="line">                    &lt;workdir&gt;/ROOT&lt;/workdir&gt;</span><br><span class="line">                    &lt;cmd&gt;["java","-version"]&lt;/cmd&gt;</span><br><span class="line">                    &lt;entryPoint&gt;["java","-jar","$&#123;project.build.finalName&#125;.jar"]&lt;/entryPoint&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;!-- 指定Dockerfile 路径</span><br><span class="line">                        &lt;dockerDirectory&gt;$&#123;project.basedir&#125;/src/main/docker&lt;/dockerDirectory&gt;</span><br><span class="line">                    --&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;!--指定远程 docker api地址--&gt;</span><br><span class="line">                    &lt;dockerHost&gt;http:<span class="comment">//39.107.253.141:2375&lt;/dockerHost&gt;</span></span><br><span class="line"></span><br><span class="line">                    &lt;!--这里是复制jar包到 docker 容器指定目录配置--&gt;</span><br><span class="line">                    &lt;resources&gt;</span><br><span class="line">                        &lt;resource&gt;</span><br><span class="line">                            &lt;targetPath&gt;/ROOT&lt;/targetPath&gt;</span><br><span class="line">                            &lt;!-- 用于指定需要复制的根目录，$&#123;project.build.directory&#125;表示target目录 --&gt;</span><br><span class="line">                            &lt;directory&gt;$&#123;project.build.directory&#125;&lt;/directory&gt;</span><br><span class="line">                            &lt;!-- 用于指定需要复制的文件。$&#123;project.build.finalName&#125;.jar指的是打包后的jar包文件 --&gt;</span><br><span class="line">                            &lt;include&gt;$&#123;project.build.finalName&#125;.jar&lt;/include&gt;</span><br><span class="line">                        &lt;/resource&gt;</span><br><span class="line">                    &lt;/resources&gt;</span><br><span class="line">                &lt;/configuration&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">            &lt;!-- Docker maven plugin --&gt;</span><br><span class="line">        &lt;/plugins&gt;</span><br><span class="line">    &lt;/build&gt;</span><br></pre></td></tr></table></figure>

<p>（f）执行命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package docker:build</span><br></pre></td></tr></table></figure>

<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p>Docker命令大全：<a href="https://www.runoob.com/docker/docker-command-manual.html" target="_blank" rel="noopener">https://www.runoob.com/docker/docker-command-manual.html</a></p>
<p>阿里云官网：<a href="https://developer.aliyun.com/mirror/docker-ce" target="_blank" rel="noopener">https://developer.aliyun.com/mirror/docker-ce</a></p>
<p>B站视频讲解：<a href="https://www.bilibili.com/video/BV167411g7Lg?p=3" target="_blank" rel="noopener">https://www.bilibili.com/video/BV167411g7Lg?p=3</a></p>
<p>B站资料：链接: <a href="https://pan.baidu.com/s/1eP3Mn4G2N_cxaTlL5xZeLg" target="_blank" rel="noopener">https://pan.baidu.com/s/1eP3Mn4G2N_cxaTlL5xZeLg</a> 提取码: 899m</p>

  </article>

  <div class="nexmoe-post-meta nexmoe-rainbow">
    
        <a class="nexmoefont icon-appstore-fill -link" href="/categories/CentOS7/">CentOS7</a>
    
    
        <a class="nexmoefont icon-tag-fill -link" href="/tags/CentOS7/" rel="tag">CentOS7</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/Docker/" rel="tag">Docker</a>
    
</div>

  <div class="nexmoe-post-footer" style="margin:25px 0px 0px 0px;">
    
      
  <div class="nexmoe-post-copyright">
    <strong>本文作者：</strong>Mr.wang<br>
    <strong>本文链接：</strong><a href="http://yoursite.com/2020/04/27/CentOS7-Docker/" title="http:&#x2F;&#x2F;yoursite.com&#x2F;2020&#x2F;04&#x2F;27&#x2F;CentOS7-Docker&#x2F;" target="_blank" rel="noopener">http:&#x2F;&#x2F;yoursite.com&#x2F;2020&#x2F;04&#x2F;27&#x2F;CentOS7-Docker&#x2F;</a><br>
    
      <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可
    
  </div>


    
    <section class="nexmoe-comment">
    <div class="valine"></div>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.9/dist/Valine.min.js'></script>
<script>
    // 使用方法 https://valine.js.org/quickstart.html
    new Valine({
        el: '.valine',
        appId: 'd7kEWE2vV2Nhz97DAi16namp-gzGzoHsz',
        appKey: '4tikL34MHeDjE3UTiNHXFUGx'
    })
</script>
</section>
  </div>
</div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js,gh/nexmoe/nexmoe.github.io@latest/js/app.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!--<script src="/js/app.js?v=1590388344456"></script>-->


    <script src="https://cdn.jsdelivr.net/gh/xtaodada/xtaodada.github.io@0.0.2/copy.js"></script>


 
<script> 
!function(e,t,a){function n(){c(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"),o(),r()}function r(){for(var e=0;e<d.length;e++)d[e].alpha<=0?(t.body.removeChild(d[e].el),d.splice(e,1)):(d[e].y--,d[e].scale+=.004,d[e].alpha-=.013,d[e].el.style.cssText="left:"+d[e].x+"px;top:"+d[e].y+"px;opacity:"+d[e].alpha+";transform:scale("+d[e].scale+","+d[e].scale+") rotate(45deg);background:"+d[e].color+";z-index:99999");requestAnimationFrame(r)}function o(){var t="function"==typeof e.onclick&&e.onclick;e.onclick=function(e){t&&t(),i(e)}}function i(e){var a=t.createElement("div");a.className="heart",d.push({el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s()}),t.body.appendChild(a)}function c(e){var a=t.createElement("style");a.type="text/css";try{a.appendChild(t.createTextNode(e))}catch(t){a.styleSheet.cssText=e}t.getElementsByTagName("head")[0].appendChild(a)}function s(){return"rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"}var d=[];e.requestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)}}(),n()}(window,document);
</script>



  





</body>

</html>
